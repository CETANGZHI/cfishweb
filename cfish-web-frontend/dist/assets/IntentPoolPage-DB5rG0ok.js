import{c as O,u as P,r as c,j as e,P as $,S as H,M as _,i as q}from"./index-C8wrHQVv.js";import{C as U}from"./clock-JGjiCfXY.js";import{E as B}from"./eye-BeiRnY-h.js";import{C as V}from"./circle-alert-CJh_HRHN.js";import{C as z}from"./circle-x-C20urJF4.js";import{S as J}from"./star-Boc2H8BA.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],G=O("refresh-cw",X),te=()=>{const{t:K}=P(),[S,k]=c.useState([]),[I,h]=c.useState(!0),[r,i]=c.useState({type:"all",status:"active",category:"",currency:"all",price_min:"",price_max:""}),[x,T]=c.useState(""),[g,p]=c.useState(null),[F,m]=c.useState(!1),[f,M]=c.useState([]),[d,b]=c.useState("pool"),o="user_123";c.useEffect(()=>{u(),j()},[r]);const u=async()=>{try{h(!0);const s=new URLSearchParams({type:r.type,status:r.status,currency:r.currency,limit:"20",offset:"0"});r.category&&s.append("category",r.category),r.price_min&&s.append("price_min",r.price_min),r.price_max&&s.append("price_max",r.price_max);const t=await(await fetch(`/api/intents?${s}`)).json();t.success&&k(t.data.intents)}catch(s){console.error("Failed to fetch intents:",s)}finally{h(!1)}},j=async()=>{try{const l=await(await fetch(`/api/intents/user/${o}`)).json();l.success&&M(l.data.intents)}catch(s){console.error("Failed to fetch user intents:",s)}},L=async s=>{try{const t=await(await fetch("/api/intents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_address:o,...s})})).json();t.success?(alert("Intent created successfully!"),m(!1),u(),j()):alert(t.error||"Failed to create intent")}catch(l){console.error("Failed to create intent:",l),alert("Failed to create intent")}},y=async(s,l)=>{try{const n=await(await fetch(`/api/intents/${s}/respond`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_address:o,...l})})).json();n.success?(alert("Response submitted successfully!"),u()):alert(n.error||"Failed to submit response")}catch(t){console.error("Failed to respond to intent:",t),alert("Failed to submit response")}},v=s=>{switch(s){case"buy":return"ðŸ›’";case"sell":return"ðŸ’°";case"trade":return"ðŸ”„";case"rent":return"ðŸ“…";default:return"ðŸ“‹"}},N=s=>{switch(s){case"buy":return"bg-green-100 text-green-800";case"sell":return"bg-blue-100 text-blue-800";case"trade":return"bg-purple-100 text-purple-800";case"rent":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},w=s=>{switch(s){case"active":return e.jsx(q,{className:"w-4 h-4 text-green-500"});case"matched":return e.jsx(J,{className:"w-4 h-4 text-yellow-500"});case"expired":return e.jsx(z,{className:"w-4 h-4 text-red-500"});case"cancelled":return e.jsx(V,{className:"w-4 h-4 text-gray-500"});default:return e.jsx(G,{className:"w-4 h-4 text-blue-500"})}},D=S.filter(s=>s.title.toLowerCase().includes(x.toLowerCase())||s.description.toLowerCase().includes(x.toLowerCase())),C=({intent:s})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:v(s.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.title}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(s.type)}`,children:s.type.toUpperCase()}),e.jsxs("div",{className:"flex items-center ml-2",children:[w(s.status),e.jsx("span",{className:"ml-1 text-xs text-gray-600",children:s.status})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:s.offer.amount?`${s.offer.amount} ${s.offer.currency}`:"Negotiable"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Priority: ",s.matching_criteria.priority_score,"/100"]})]})]}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Collection:"}),e.jsx("div",{className:"text-gray-600",children:s.target_nft.collection})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Rarity:"}),e.jsx("div",{className:"text-gray-600",children:s.target_nft.rarity})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Matches:"}),e.jsx("div",{className:"text-gray-600",children:s.match_count})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Responses:"}),e.jsx("div",{className:"text-gray-600",children:s.response_count})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.map((l,t)=>e.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs",children:l},t))}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx(U,{className:"inline w-3 h-3 mr-1"}),"Created ",new Date(s.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>p(s),className:"text-blue-600 hover:text-blue-800 font-medium text-sm flex items-center",children:[e.jsx(B,{className:"w-4 h-4 mr-1"}),"View Details"]}),s.status==="active"&&s.user_address!==o&&e.jsxs("button",{onClick:()=>y(s.id,{response_type:"interest",message:"I am interested in this intent"}),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),"Respond"]})]})]})]}),R=({onClose:s,onCreate:l})=>{const[t,n]=c.useState({type:"buy",title:"",description:"",target_nft:{collection:"",rarity:"Common",traits:[]},offer:{currency:"CFISH",amount:"",additional_terms:""},matching_criteria:{auto_match:!0,max_matches:5,priority_score:50},tags:[]}),E=a=>{a.preventDefault(),l(t)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Intent"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"Ã—"})]}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Intent Type"}),e.jsxs("select",{value:t.type,onChange:a=>n({...t,type:a.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"buy",children:"Buy"}),e.jsx("option",{value:"sell",children:"Sell"}),e.jsx("option",{value:"trade",children:"Trade"}),e.jsx("option",{value:"rent",children:"Rent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),e.jsxs("select",{value:t.offer.currency,onChange:a=>n({...t,offer:{...t.offer,currency:a.target.value}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"CFISH",children:"CFISH"}),e.jsx("option",{value:"SOL",children:"SOL"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:t.title,onChange:a=>n({...t,title:a.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter intent title",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:t.description,onChange:a=>n({...t,description:a.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Describe what you're looking for",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Collection"}),e.jsx("input",{type:"text",value:t.target_nft.collection,onChange:a=>n({...t,target_nft:{...t.target_nft,collection:a.target.value}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"NFT Collection",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rarity"}),e.jsxs("select",{value:t.target_nft.rarity,onChange:a=>n({...t,target_nft:{...t.target_nft,rarity:a.target.value}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"Common",children:"Common"}),e.jsx("option",{value:"Rare",children:"Rare"}),e.jsx("option",{value:"Epic",children:"Epic"}),e.jsx("option",{value:"Legendary",children:"Legendary"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Offer Amount"}),e.jsx("input",{type:"number",value:t.offer.amount,onChange:a=>n({...t,offer:{...t.offer,amount:a.target.value}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Amount you're willing to pay/receive"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Terms"}),e.jsx("textarea",{value:t.offer.additional_terms,onChange:a=>n({...t,offer:{...t.offer,additional_terms:a.target.value}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2",placeholder:"Any additional terms or conditions"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"auto_match",checked:t.matching_criteria.auto_match,onChange:a=>n({...t,matching_criteria:{...t.matching_criteria,auto_match:a.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"auto_match",className:"ml-2 text-sm text-gray-700",children:"Enable automatic matching"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Intent"})]})]})]})})})},A=({intent:s,onClose:l})=>s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-3xl mr-3",children:v(s.type)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s.title}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${N(s.type)}`,children:s.type.toUpperCase()}),e.jsxs("div",{className:"flex items-center ml-3",children:[w(s.status),e.jsx("span",{className:"ml-1 text-sm text-gray-600",children:s.status})]})]})]})]}),e.jsx("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"Ã—"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Intent Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",s.type]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",s.status]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Created:"})," ",new Date(s.created_at).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Expires:"})," ",new Date(s.expires_at).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Matches:"})," ",s.match_count]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Responses:"})," ",s.response_count]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Target NFT"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Collection:"})," ",s.target_nft.collection]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Rarity:"})," ",s.target_nft.rarity]}),s.target_nft.min_value&&e.jsxs("div",{children:[e.jsx("strong",{children:"Min Value:"})," ",s.target_nft.min_value]}),s.target_nft.max_value&&e.jsxs("div",{children:[e.jsx("strong",{children:"Max Value:"})," ",s.target_nft.max_value]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Description"}),e.jsx("p",{className:"text-gray-600",children:s.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Offer Details"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Currency:"})," ",s.offer.currency]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Amount:"})," ",s.offer.amount||"Negotiable"]})]}),s.offer.additional_terms&&e.jsxs("div",{className:"mt-3",children:[e.jsx("strong",{children:"Additional Terms:"}),e.jsx("p",{className:"text-gray-600 mt-1",children:s.offer.additional_terms})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Close"}),s.status==="active"&&s.user_address!==o&&e.jsxs("button",{onClick:()=>{y(s.id,{response_type:"offer",message:"I would like to make an offer for this intent"}),l()},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Make Offer"]})]})]})})}):null;return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Intent Pool"}),e.jsx("p",{className:"text-gray-600",children:"Discover and respond to trading intents from the community"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>b("pool"),className:`py-2 px-1 border-b-2 font-medium text-sm ${d==="pool"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Intent Pool"}),e.jsxs("button",{onClick:()=>b("my-intents"),className:`py-2 px-1 border-b-2 font-medium text-sm ${d==="my-intents"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["My Intents (",f.length,")"]}),e.jsxs("button",{onClick:()=>m(!0),className:"py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center text-sm",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Create Intent"]})]})})}),d==="pool"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:x,onChange:s=>T(s.target.value),className:"pl-10 w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search intents..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsxs("select",{value:r.type,onChange:s=>i({...r,type:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"buy",children:"Buy"}),e.jsx("option",{value:"sell",children:"Sell"}),e.jsx("option",{value:"trade",children:"Trade"}),e.jsx("option",{value:"rent",children:"Rent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:r.status,onChange:s=>i({...r,status:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"matched",children:"Matched"}),e.jsx("option",{value:"expired",children:"Expired"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),e.jsxs("select",{value:r.currency,onChange:s=>i({...r,currency:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Currencies"}),e.jsx("option",{value:"CFISH",children:"CFISH"}),e.jsx("option",{value:"SOL",children:"SOL"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",value:r.price_min,onChange:s=>i({...r,price_min:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-2 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Min"}),e.jsx("input",{type:"number",value:r.price_max,onChange:s=>i({...r,price_max:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-2 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Max"})]})]})]})}),I?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(s=>e.jsx(C,{intent:s},s.id))})]}),d==="my-intents"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(s=>e.jsx(C,{intent:s},s.id))}),F&&e.jsx(R,{onClose:()=>m(!1),onCreate:L}),g&&e.jsx(A,{intent:g,onClose:()=>p(null)})]})})};export{te as default};
