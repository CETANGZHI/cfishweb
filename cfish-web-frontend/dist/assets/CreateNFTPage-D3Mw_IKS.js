import{u as v,e as C,r as c,j as e,X as k,h as T,i as P}from"./index-C8wrHQVv.js";import{C as z}from"./circle-x-C20urJF4.js";import{F as y}from"./file-text-lahZJK90.js";import{I}from"./image-B8SozRfX.js";import{M as D}from"./music-B9wQOOP4.js";import{V as O}from"./video-D5jNh4WT.js";const L=({initialTags:r=[],onTagsChange:s})=>{const{t:o}=v(),{addNotification:p}=C(),[i,m]=c.useState(r),[u,l]=c.useState(""),[h,g]=c.useState(!1),[f,b]=c.useState({}),[a,n]=c.useState(!0);c.useEffect(()=>{s(i)},[i,s]);const d=c.useCallback(async()=>{n(!0);try{const t=await fetch("https://api.example.com/tags/predefined");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const x=await t.json();b(x)}catch(t){console.error("Failed to fetch predefined tags:",t),p({type:"error",title:o("error"),message:o("Failed to load predefined tags.")})}finally{n(!1)}},[p,o]);c.useEffect(()=>{d()},[d]);const N=t=>{l(t.target.value)},F=t=>{t.key==="Enter"&&u.trim()!==""&&(t.preventDefault(),j(u.trim()),l(""))},j=t=>{i.includes(t)||m([...i,t])},w=t=>{m(i.filter(x=>x!==t))},S=t=>{j(t),g(!1)};return e.jsxs("div",{className:"tag-input-container",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:o("nft.tags")}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:i.map(t=>e.jsxs("span",{className:"flex items-center gap-1 bg-primary/10 text-primary px-3 py-1 rounded-full text-sm",children:[t,e.jsx("button",{type:"button",onClick:()=>w(t),className:"ml-1 text-primary hover:text-primary-foreground transition-colors",children:e.jsx(k,{size:14})})]},t))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:u,onChange:N,onKeyDown:F,onFocus:()=>g(!0),onBlur:()=>setTimeout(()=>g(!1),100),placeholder:o("nft.addTagPlaceholder"),className:"w-full px-4 py-2 rounded-lg bg-secondary/50 border border-border focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),h&&!a&&Object.keys(f).length>0&&e.jsx("div",{className:"absolute z-10 w-full bg-card border border-border rounded-lg shadow-lg mt-1 max-h-60 overflow-y-auto",children:Object.keys(f).map(t=>e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase mb-1",children:o(`nft.predefinedTags.${t}`)}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f[t].map(x=>e.jsx("button",{type:"button",onClick:()=>S(x.label),className:"px-3 py-1 text-sm rounded-full bg-secondary hover:bg-secondary/70 transition-colors",children:x.label},x.value))})]},t))}),h&&a&&e.jsx("div",{className:"absolute z-10 w-full bg-card border border-border rounded-lg shadow-lg mt-1 p-4 text-center text-muted-foreground",children:o("Loading predefined tags...")}),h&&!a&&Object.keys(f).length===0&&e.jsx("div",{className:"absolute z-10 w-full bg-card border border-border rounded-lg shadow-lg mt-1 p-4 text-center text-muted-foreground",children:o("No predefined tags available.")})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o("nft.tagInstructions")})]})},R=()=>{const{t:r}=v(),[s,o]=c.useState({name:"",description:"",file:null,royalty:5,commission:2,tags:[],attributes:[],price:"",currency:"both",listForSale:!0}),[p,i]=c.useState(null),[m,u]=c.useState(null),l=a=>{const{name:n,value:d}=a.target;o(N=>({...N,[n]:d}))},h=a=>{const n=a.target.files[0];n&&(o(d=>({...d,file:n})),i(URL.createObjectURL(n)))},g=a=>{o(n=>({...n,tags:a}))},f=async a=>{a.preventDefault(),u("uploading");try{const n=await fetch("https://api.example.com/nfts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.name,description:s.description,royalty:s.royalty,commission:s.commission,tags:s.tags,attributes:s.attributes,price:s.price,currency:s.currency,listForSale:s.listForSale})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const d=await n.json();console.log("NFT created successfully:",d),u("success"),o({name:"",description:"",file:null,royalty:5,commission:2,tags:[],attributes:[],price:"",currency:"both",listForSale:!0}),i(null)}catch(n){console.error("NFT creation failed:",n),u("error")}},b=a=>a?a.type.startsWith("image/")?e.jsx(I,{size:48,className:"text-muted-foreground"}):a.type.startsWith("audio/")?e.jsx(D,{size:48,className:"text-muted-foreground"}):a.type.startsWith("video/")?e.jsx(O,{size:48,className:"text-muted-foreground"}):e.jsx(y,{size:48,className:"text-muted-foreground"}):e.jsx(y,{size:48,className:"text-muted-foreground"});return e.jsxs("div",{className:"container mx-auto p-4 lg:p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-6",children:r("createNft.title")}),e.jsx("p",{className:"text-muted-foreground mb-8",children:r("createNft.description")}),e.jsxs("form",{onSubmit:f,className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:r("createNft.uploadFile")}),e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center cursor-pointer hover:border-primary transition-colors relative",onClick:()=>document.getElementById("nftFile").click(),children:[p?e.jsx("img",{src:p,alt:"NFT Preview",className:"max-h-64 w-full object-contain mx-auto rounded-lg"}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-48",children:[b(s.file),e.jsx("p",{className:"mt-4 text-muted-foreground",children:r("createNft.dragDrop")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r("createNft.maxSize")})]}),e.jsx("input",{type:"file",id:"nftFile",className:"hidden",onChange:h,accept:"image/*,audio/*,video/*"})]}),s.file&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[r("createNft.selectedFile"),": ",s.file.name]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:r("createNft.attributes")}),e.jsx("p",{className:"text-muted-foreground",children:r("createNft.attributesDesc")})]})]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:r("createNft.details")}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-foreground mb-2",children:r("createNft.name")}),e.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:l,placeholder:r("createNft.namePlaceholder"),className:"w-full px-4 py-2 rounded-lg bg-secondary/50 border border-border focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-foreground mb-2",children:r("createNft.descriptionLabel")}),e.jsx("textarea",{id:"description",name:"description",value:s.description,onChange:l,rows:"4",placeholder:r("createNft.descriptionPlaceholder"),className:"w-full px-4 py-2 rounded-lg bg-secondary/50 border border-border focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"royalty",className:"block text-sm font-medium text-foreground mb-2",children:r("createNft.royalty")}),e.jsx("input",{type:"number",id:"royalty",name:"royalty",value:s.royalty,onChange:l,min:"0",max:"100",className:"w-full px-4 py-2 rounded-lg bg-secondary/50 border border-border focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("createNft.royaltyDesc")})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",id:"listForSale",checked:s.listForSale,onChange:a=>o(n=>({...n,listForSale:a.target.checked})),className:"mr-2"}),e.jsx("label",{htmlFor:"listForSale",className:"text-sm font-medium text-foreground",children:r("createNft.listForSale")})]}),s.listForSale&&e.jsxs("div",{className:"space-y-4 p-4 bg-secondary/30 rounded-lg border border-border",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-foreground mb-2",children:r("createNft.price")}),e.jsx("input",{type:"number",id:"price",name:"price",value:s.price,onChange:l,min:"0",step:"0.01",placeholder:"0.00",className:"w-full px-4 py-2 rounded-lg bg-secondary/50 border border-border focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",required:s.listForSale})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-3",children:r("createNft.acceptedCurrency")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"currency-sol",name:"currency",value:"sol",checked:s.currency==="sol",onChange:l,className:"mr-3"}),e.jsxs("label",{htmlFor:"currency-sol",className:"flex items-center text-sm text-foreground",children:[e.jsx("span",{className:"bg-purple-600 text-white px-2 py-1 rounded text-xs mr-2",children:"SOL"}),r("createNft.solOnly")]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"currency-cfish",name:"currency",value:"cfish",checked:s.currency==="cfish",onChange:l,className:"mr-3"}),e.jsxs("label",{htmlFor:"currency-cfish",className:"flex items-center text-sm text-foreground",children:[e.jsx("span",{className:"bg-primary text-black px-2 py-1 rounded text-xs mr-2",children:"CFISH"}),r("createNft.cfishOnly"),e.jsx("span",{className:"ml-2 bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs",children:r("createNft.noFees")})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"currency-both",name:"currency",value:"both",checked:s.currency==="both",onChange:l,className:"mr-3"}),e.jsxs("label",{htmlFor:"currency-both",className:"flex items-center text-sm text-foreground",children:[e.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-primary text-white px-2 py-1 rounded text-xs mr-2",children:"SOL/CFISH"}),r("createNft.bothCurrencies"),e.jsx("span",{className:"ml-2 bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs",children:r("createNft.noFeesForCfish")})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-primary/10 border border-primary/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-primary rounded-full flex items-center justify-center mt-0.5",children:e.jsx("span",{className:"text-black text-xs font-bold",children:"!"})}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"font-medium text-primary mb-1",children:["💡 ",r("createNft.priorityTip")]}),e.jsx("p",{className:"text-muted-foreground",children:r("createNft.cfishPriorityDescription")})]})]})}),e.jsxs("div",{className:"mt-3 p-3 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:r("createNft.feeStructure")}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["SOL ",r("createNft.transactions"),":"]}),e.jsxs("span",{children:[s.commission,"% ",r("createNft.platformFee")]})]}),e.jsxs("div",{className:"flex justify-between text-green-400",children:[e.jsxs("span",{children:["CFISH ",r("createNft.transactions"),":"]}),e.jsx("span",{children:r("createNft.freeTransaction")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[r("createNft.royalty"),":"]}),e.jsxs("span",{children:[s.royalty,"% ",r("createNft.toCreator")]})]})]})]})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"commission",className:"block text-sm font-medium text-foreground mb-2",children:r("createNft.commission")}),e.jsx("input",{type:"number",id:"commission",name:"commission",value:s.commission,onChange:l,min:"0",max:"10",step:"0.1",className:"w-full px-4 py-2 rounded-lg bg-secondary/50 border border-border focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("createNft.commissionDesc")})]}),e.jsx("div",{className:"mb-4",children:e.jsx(L,{onTagsChange:g})})]}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-primary text-black font-bold py-3 rounded-lg text-lg hover:shadow-lg hover:shadow-primary/25 transition-all duration-300 flex items-center justify-center gap-2",disabled:m==="uploading",children:m==="uploading"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-black"}),r("createNft.uploading")]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{size:20}),r("createNft.createAndList")]})}),m==="success"&&e.jsxs("div",{className:"flex items-center gap-2 text-green-500 bg-green-500/10 p-3 rounded-lg",children:[e.jsx(P,{size:20}),e.jsx("span",{children:r("createNft.successMessage")})]}),m==="error"&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500 bg-red-500/10 p-3 rounded-lg",children:[e.jsx(z,{size:20}),e.jsx("span",{children:r("createNft.errorMessage")})]})]})]})]})};export{R as default};
