import{u as I,d as H,e as $,r as l,j as e,f as b}from"./index-C8wrHQVv.js";import{M as S}from"./Modal-B5K59-TF.js";const E=()=>{const{t:s}=I(),{isConnected:p,publicKey:u}=H(),{addNotification:n}=$(),[d,o]=l.useState(!0),[f,x]=l.useState(0),[y,m]=l.useState(0),[k,j]=l.useState(0),[v,g]=l.useState(!1),[C,h]=l.useState(!1),[i,w]=l.useState(""),[c,N]=l.useState("");l.useEffect(()=>{p&&(async()=>{o(!0);try{const a=await fetch(`https://api.example.com/staking/${u.toBase58()}`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const r=await a.json();x(r.cfishBalance),m(r.stakedBalance),j(r.rewards)}catch(a){console.error("Failed to fetch staking data:",a),n({type:"error",title:s("error"),message:s("Failed to load staking data")})}finally{o(!1)}})()},[p,n,s]);const B=async()=>{if(!i||parseFloat(i)<=0){n({type:"warning",title:s("Invalid Amount"),message:s("Please enter a valid amount to stake")});return}if(parseFloat(i)>f){n({type:"warning",title:s("Insufficient Balance"),message:s("You do not have enough CFISH to stake")});return}o(!0);try{const t=await fetch(`https://api.example.com/staking/${u.toBase58()}/stake`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(i)})});if(!t.ok){const r=await t.json();throw new Error(r.message||`HTTP error! status: ${t.status}`)}const a=await t.json();x(a.cfishBalance),m(a.stakedBalance),n({type:"success",title:s("success"),message:`${s("Staked")} ${i} CFISH successfully!`}),g(!1),w("")}catch{n({type:"error",title:s("error"),message:s("Staking failed. Please try again.")})}finally{o(!1)}},F=async()=>{if(!c||parseFloat(c)<=0){n({type:"warning",title:s("Invalid Amount"),message:s("Please enter a valid amount to unstake")});return}if(parseFloat(c)>y){n({type:"warning",title:s("Insufficient Staked Balance"),message:s("You do not have enough staked CFISH to unstake")});return}o(!0);try{const t=await fetch(`https://api.example.com/staking/${u.toBase58()}/unstake`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(c)})});if(!t.ok){const r=await t.json();throw new Error(r.message||`HTTP error! status: ${t.status}`)}const a=await t.json();x(a.cfishBalance),m(a.stakedBalance),n({type:"success",title:s("success"),message:`${s("Unstaked")} ${c} CFISH successfully!`}),h(!1),N("")}catch{n({type:"error",title:s("error"),message:s("Unstaking failed. Please try again.")})}finally{o(!1)}},T=async()=>{o(!0);try{const t=await fetch(`https://api.example.com/staking/${u.toBase58()}/claim-rewards`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok){const r=await t.json();throw new Error(r.message||`HTTP error! status: ${t.status}`)}const a=await t.json();x(a.cfishBalance),m(a.stakedBalance),j(a.rewards),n({type:"success",title:s("success"),message:`${s("Claimed")} ${k} CFISH rewards successfully!`})}catch{n({type:"error",title:s("error"),message:s("Claiming rewards failed. Please try again.")})}finally{o(!1)}};return p?e.jsxs("div",{className:"min-h-screen bg-black text-white",children:[e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-6",children:s("staking.title")}),d?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(b,{size:"lg"})}):e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:s("staking.yourBalance")}),e.jsxs("h3",{className:"text-2xl font-bold text-primary-foreground",children:[f," CFISH"]})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:s("staking.stakedBalance")}),e.jsxs("h3",{className:"text-2xl font-bold text-green-400",children:[y," CFISH"]})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:s("staking.rewardsEarned")}),e.jsxs("h3",{className:"text-2xl font-bold text-yellow-400",children:[k," CFISH"]})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>g(!0),className:"flex-1 px-4 py-2 bg-primary text-black rounded-lg hover:bg-primary/80 transition-colors",children:s("staking.stake")}),e.jsx("button",{onClick:()=>h(!0),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:s("staking.unstake")}),e.jsx("button",{onClick:T,disabled:k===0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:s("staking.claimRewards")})]}),e.jsxs("div",{className:"border-t border-border pt-6 mt-6 space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-foreground",children:s("staking.howItWorks")}),e.jsx("p",{className:"text-muted-foreground",children:s("staking.description")}),e.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-2",children:[e.jsx("li",{children:s("staking.info1")}),e.jsx("li",{children:s("staking.info2")}),e.jsx("li",{children:s("staking.info3")})]})]})]})]}),e.jsx(S,{isOpen:v,onClose:()=>g(!1),title:s("staking.stakeCFISH"),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("amountToStake")}),e.jsx("input",{type:"number",value:i,onChange:t=>w(t.target.value),placeholder:"0.00",min:"0",step:"0.000001",className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-primary"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[s("yourAvailableBalance"),": ",f," CFISH"]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-gray-400 hover:text-white",children:s("cancel")}),e.jsx("button",{onClick:B,disabled:d,className:"px-4 py-2 bg-primary text-black rounded-lg hover:bg-primary/80 disabled:opacity-50",children:d?e.jsx(b,{size:"sm"}):s("staking.stake")})]})]})}),e.jsx(S,{isOpen:C,onClose:()=>h(!1),title:s("staking.unstakeCFISH"),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("amountToUnstake")}),e.jsx("input",{type:"number",value:c,onChange:t=>N(t.target.value),placeholder:"0.00",min:"0",step:"0.000001",className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-primary"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[s("yourStakedBalance"),": ",y," CFISH"]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-gray-400 hover:text-white",children:s("cancel")}),e.jsx("button",{onClick:F,disabled:d,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:d?e.jsx(b,{size:"sm"}):s("staking.unstake")})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:s("wallet.connectYourWallet")}),e.jsx("p",{className:"text-gray-400 mb-6",children:s("wallet.connectToViewStaking")})]})})};export{E as default};
