import{c as v,u as T,r as l,j as e,S as L}from"./index-C8wrHQVv.js";import{S as F}from"./star-Boc2H8BA.js";import{C as D}from"./clock-JGjiCfXY.js";import{U as q}from"./users-BqxOkAPd.js";import{E as $}from"./eye-BeiRnY-h.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],U=v("calendar",E);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],R=v("trophy",P),K=()=>{const{t:H}=T(),[y,N]=l.useState([]),[w,x]=l.useState(!0),[a,n]=l.useState({status:"all",category:"all",featured:!1}),[c,C]=l.useState(""),[m,h]=l.useState(null),[V,J]=l.useState(!1),[u,S]=l.useState([]),[i,d]=l.useState("all"),g="user_123";l.useEffect(()=>{p(),j()},[a]);const p=async()=>{try{x(!0);const s=new URLSearchParams({status:a.status,category:a.category,limit:"20",offset:"0"}),r=await(await fetch(`/api/activities?${s}`)).json();r.success&&N(r.data.activities)}catch(s){console.error("Failed to fetch activities:",s)}finally{x(!1)}},j=async()=>{try{const t=await(await fetch(`/api/activities/user/${g}`)).json();t.success&&S(t.data.activities)}catch(s){console.error("Failed to fetch user activities:",s)}},b=async s=>{try{const r=await(await fetch(`/api/activities/${s}/join`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_address:g})})).json();r.success?(alert("Successfully joined activity!"),p(),j()):alert(r.error||"Failed to join activity")}catch(t){console.error("Failed to join activity:",t),alert("Failed to join activity")}},k=s=>{switch(s){case"upcoming":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"ended":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},A=s=>{switch(s){case"trading":return"💱";case"staking":return"🔒";case"social":return"👥";case"competition":return"🏆";case"airdrop":return"🎁";case"launch":return"🚀";default:return"📅"}},_=y.filter(s=>{const t=s.title.toLowerCase().includes(c.toLowerCase())||s.description.toLowerCase().includes(c.toLowerCase()),r=!a.featured||s.featured;return t&&r}),f=({activity:s,showJoinButton:t=!0})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.banner_image,alt:s.title,className:"w-full h-48 object-cover"}),s.featured&&e.jsxs("div",{className:"absolute top-4 left-4 bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-semibold flex items-center",children:[e.jsx(F,{className:"w-3 h-3 mr-1"}),"Featured"]}),e.jsx("div",{className:`absolute top-4 right-4 px-2 py-1 rounded-full text-xs font-semibold ${k(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"text-2xl mr-2",children:A(s.category)}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s.title})]}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:s.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.map((r,o)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:r},o))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:new Date(s.start_time).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:[s.current_participants,"/",s.max_participants]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:[s.rewards.total_pool," ",s.rewards.type]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"View Details"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:()=>h(s),className:"text-blue-600 hover:text-blue-800 font-medium",children:"View Details"}),t&&s.status==="active"&&e.jsx("button",{onClick:()=>b(s.id),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Join Activity"})]})]})]}),M=({activity:s,onClose:t})=>s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s.title}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),e.jsx("img",{src:s.banner_image,alt:s.title,className:"w-full h-64 object-cover rounded-lg mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Activity Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Category:"})," ",s.category_name||s.category]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",s.status]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Start Time:"})," ",new Date(s.start_time).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"End Time:"})," ",new Date(s.end_time).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Participants:"})," ",s.current_participants,"/",s.max_participants]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Rewards"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",s.rewards.type]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Total Pool:"})," ",s.rewards.total_pool]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Distribution:"})," ",s.rewards.distribution]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Description"}),e.jsx("p",{className:"text-gray-600",children:s.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Requirements"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1",children:[e.jsxs("li",{children:["Minimum Level: ",s.requirements.min_level]}),e.jsxs("li",{children:["Minimum Stake: ",s.requirements.min_stake," CFISH"]}),e.jsxs("li",{children:["KYC Required: ",s.requirements.kyc_required?"Yes":"No"]}),e.jsxs("li",{children:["Whitelist Only: ",s.requirements.whitelist_only?"Yes":"No"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Rules"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1",children:s.rules.map((r,o)=>e.jsx("li",{children:r},o))})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{onClick:t,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Close"}),s.status==="active"&&e.jsx("button",{onClick:()=>{b(s.id),t()},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Join Activity"})]})]})})}):null;return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Activity Management"}),e.jsx("p",{className:"text-gray-600",children:"Participate in platform activities and earn rewards"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>d("all"),className:`py-2 px-1 border-b-2 font-medium text-sm ${i==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"All Activities"}),e.jsxs("button",{onClick:()=>d("my-activities"),className:`py-2 px-1 border-b-2 font-medium text-sm ${i==="my-activities"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["My Activities (",u.length,")"]}),e.jsx("button",{onClick:()=>d("calendar"),className:`py-2 px-1 border-b-2 font-medium text-sm ${i==="calendar"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Calendar"})]})})}),i==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:c,onChange:s=>C(s.target.value),className:"pl-10 w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search activities..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:a.status,onChange:s=>n({...a,status:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"upcoming",children:"Upcoming"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"ended",children:"Ended"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:a.category,onChange:s=>n({...a,category:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"trading",children:"Trading"}),e.jsx("option",{value:"staking",children:"Staking"}),e.jsx("option",{value:"social",children:"Social"}),e.jsx("option",{value:"competition",children:"Competition"}),e.jsx("option",{value:"airdrop",children:"Airdrop"}),e.jsx("option",{value:"launch",children:"Launch"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.featured,onChange:s=>n({...a,featured:s.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Featured only"})]})})]})}),w?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(s=>e.jsx(f,{activity:s},s.id))})]}),i==="my-activities"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(s=>e.jsx(f,{activity:s,showJoinButton:!1},s.activity_id))}),i==="calendar"&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(U,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Activity Calendar"}),e.jsx("p",{className:"text-gray-600",children:"Calendar view coming soon..."})]})}),m&&e.jsx(M,{activity:m,onClose:()=>h(null)})]})})};export{K as default};
