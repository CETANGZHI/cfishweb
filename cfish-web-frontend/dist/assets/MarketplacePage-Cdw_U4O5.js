import{c as O,u as R,r as p,j as e,k as z,X as A,g as M,f as V}from"./index-C8wrHQVv.js";import{N as E}from"./NFTCard-BNEZSIRD.js";import{C as H}from"./clock-JGjiCfXY.js";import{T as F}from"./trending-up-IGamqttF.js";import{T as _}from"./trending-down-DtsSmS3F.js";import{S as D}from"./star-Boc2H8BA.js";import{L as I}from"./list-CvuOwzMS.js";import"./heart-DstOrYv-.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],q=O("funnel",P),G=({onSortChange:b,onFilterChange:h,currentSort:j="newest",currentFilters:i={},className:N=""})=>{const{t:r}=R(),[g,m]=p.useState(!1),[f,u]=p.useState(!1),y=[{value:"newest",label:r("sort.newest"),icon:H,description:r("sort.newestDesc")},{value:"oldest",label:r("sort.oldest"),icon:H,description:r("sort.oldestDesc")},{value:"price_low_high",label:r("sort.priceLowHigh"),icon:F,description:r("sort.priceLowHighDesc")},{value:"price_high_low",label:r("sort.priceHighLow"),icon:_,description:r("sort.priceHighLowDesc")},{value:"commission_low_high",label:r("sort.commissionLowHigh"),icon:F,description:r("sort.commissionLowHighDesc")},{value:"commission_high_low",label:r("sort.commissionHighLow"),icon:_,description:r("sort.commissionHighLowDesc")},{value:"rarity_high_low",label:r("sort.rarityHighLow"),icon:D,description:r("sort.rarityHighLowDesc")},{value:"rarity_low_high",label:r("sort.rarityLowHigh"),icon:D,description:r("sort.rarityLowHighDesc")}],w=[{key:"priceRange",label:r("filter.priceRange"),type:"range",min:0,max:1e3,step:.1,unit:"SOL"},{key:"commissionRange",label:r("filter.commissionRange"),type:"range",min:0,max:10,step:.1,unit:"%"},{key:"category",label:r("filter.category"),type:"select",options:[{value:"art",label:r("category.art")},{value:"music",label:r("category.music")},{value:"gaming",label:r("category.gaming")},{value:"photography",label:r("category.photography")},{value:"collectibles",label:r("category.collectibles")}]},{key:"rarity",label:r("filter.rarity"),type:"select",options:[{value:"common",label:r("rarity.common")},{value:"uncommon",label:r("rarity.uncommon")},{value:"rare",label:r("rarity.rare")},{value:"epic",label:r("rarity.epic")},{value:"legendary",label:r("rarity.legendary")}]},{key:"status",label:r("filter.status"),type:"checkbox",options:[{value:"buy_now",label:r("status.buyNow")},{value:"auction",label:r("status.auction")},{value:"offers",label:r("status.hasOffers")}]}],k=y.find(s=>s.value===j)||y[0],d=k.icon,x=s=>{b(s),u(!1)},v=(s,t)=>{const n={...i,[s]:t};h(n)},T=s=>{const t={...i};delete t[s],h(t)},C=()=>{h({})},l=Object.keys(i).length;return e.jsxs("div",{className:`bg-card border border-border rounded-lg p-4 ${N}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>u(!f),className:"flex items-center gap-2 px-4 py-2 bg-secondary/50 hover:bg-secondary/70 rounded-lg border border-border transition-colors",children:[e.jsx(d,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:k.label}),e.jsx(z,{size:14,className:`transition-transform ${f?"rotate-180":""}`})]}),f&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>u(!1)}),e.jsx("div",{className:"absolute top-full left-0 mt-2 w-64 bg-card border border-border rounded-lg shadow-lg z-20 overflow-hidden",children:e.jsx("div",{className:"py-2",children:y.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>x(s.value),className:`w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-secondary/50 transition-colors ${j===s.value?"bg-secondary/30":""}`,children:[e.jsx(t,{size:16,className:"text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:s.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.description})]})]},s.value)})})})]})]}),e.jsxs("button",{onClick:()=>m(!g),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${g||l>0?"bg-primary/10 border-primary text-primary":"bg-secondary/50 hover:bg-secondary/70 border-border"}`,children:[e.jsx(q,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:r("filter.filters")}),l>0&&e.jsx("span",{className:"bg-primary text-primary-foreground text-xs px-2 py-0.5 rounded-full",children:l})]}),l>0&&e.jsx("button",{onClick:C,className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:r("filter.clearAll")})]}),l>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Object.entries(i).map(([s,t])=>{const n=w.find(o=>o.key===s);if(!n)return null;let a=t;if(n.type==="range"&&Array.isArray(t))a=`${t[0]} - ${t[1]} ${n.unit||""}`;else if(n.type==="select"){const o=n.options.find(c=>c.value===t);a=o?o.label:t}else n.type==="checkbox"&&Array.isArray(t)&&(a=t.map(o=>{const c=n.options.find(L=>L.value===o);return c?c.label:o}).join(", "));return e.jsxs("div",{className:"flex items-center gap-2 bg-primary/10 text-primary px-3 py-1 rounded-full text-sm",children:[e.jsxs("span",{children:[n.label,": ",a]}),e.jsx("button",{onClick:()=>T(s),className:"hover:bg-primary/20 rounded-full p-0.5",children:e.jsx(A,{size:12})})]},s)})}),g&&e.jsx("div",{className:"border-t border-border pt-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(s=>{var t,n;return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:s.label}),s.type==="range"&&e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min",min:s.min,max:s.max,step:s.step,value:((t=i[s.key])==null?void 0:t[0])||"",onChange:a=>{var c;const o=[parseFloat(a.target.value)||s.min,((c=i[s.key])==null?void 0:c[1])||s.max];v(s.key,o)},className:"flex-1 px-3 py-2 bg-secondary/50 border border-border rounded-lg text-sm"}),e.jsx("span",{className:"text-muted-foreground",children:"-"}),e.jsx("input",{type:"number",placeholder:"Max",min:s.min,max:s.max,step:s.step,value:((n=i[s.key])==null?void 0:n[1])||"",onChange:a=>{var c;const o=[((c=i[s.key])==null?void 0:c[0])||s.min,parseFloat(a.target.value)||s.max];v(s.key,o)},className:"flex-1 px-3 py-2 bg-secondary/50 border border-border rounded-lg text-sm"}),s.unit&&e.jsx("span",{className:"text-muted-foreground text-sm",children:s.unit})]})}),s.type==="select"&&e.jsxs("select",{value:i[s.key]||"",onChange:a=>v(s.key,a.target.value),className:"w-full px-3 py-2 bg-secondary/50 border border-border rounded-lg text-sm",children:[e.jsx("option",{value:"",children:r("filter.selectOption")}),s.options.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]}),s.type==="checkbox"&&e.jsx("div",{className:"space-y-2",children:s.options.map(a=>{var o;return e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:((o=i[s.key])==null?void 0:o.includes(a.value))||!1,onChange:c=>{const L=i[s.key]||[],S=c.target.checked?[...L,a.value]:L.filter($=>$!==a.value);v(s.key,S.length>0?S:void 0)},className:"rounded border-border"}),e.jsx("span",{className:"text-sm",children:a.label})]},a.value)})})]},s.key)})})})]})},Z=()=>{const{t:b}=R(),[h,j]=p.useState([]),[i,N]=p.useState(!0),[r,g]=p.useState("grid"),[m,f]=p.useState({priceRange:[0,1e3],commissionRange:[0,10],category:"all",status:"all"}),[u,y]=p.useState("newest");p.useEffect(()=>{(async()=>{N(!0);try{const x=await fetch("https://api.example.com/nfts");if(!x.ok)throw new Error(`HTTP error! status: ${x.status}`);let C=(await x.json()).filter(l=>{const s=l.price>=m.priceRange[0]&&l.price<=m.priceRange[1],t=l.commission>=m.commissionRange[0]&&l.commission<=m.commissionRange[1];return s&&t});C.sort((l,s)=>{switch(u){case"newest":return s.id.localeCompare(l.id);case"oldest":return l.id.localeCompare(s.id);case"priceLowToHigh":return l.price-s.price;case"priceHighToLow":return s.price-l.price;case"commissionLowToToHigh":return l.commission-s.commission;case"commissionHighToLow":return s.commission-l.commission;case"rarityLowToHigh":return l.rarity.localeCompare(s.rarity);case"rarityHighToLow":return s.rarity.localeCompare(l.rarity);default:return 0}}),j(C)}catch(x){console.error("Failed to fetch NFTs:",x)}finally{N(!1)}})()},[m,u]);const w=d=>{f(d)},k=d=>{y(d)};return e.jsxs("div",{className:"container mx-auto p-4 lg:p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-6",children:b("marketplace.title")}),e.jsx("p",{className:"text-muted-foreground mb-8",children:b("marketplace.description")}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-1/4",children:e.jsx(G,{onFilterChange:w,onSortChange:k,currentFilters:m,currentSortOption:u})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>g("grid"),className:`p-2 rounded-lg ${r==="grid"?"bg-gray-700":"bg-gray-800"} text-gray-300 hover:bg-gray-700`,children:e.jsx(M,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>g("list"),className:`p-2 rounded-lg ${r==="list"?"bg-gray-700":"bg-gray-800"} text-gray-300 hover:bg-gray-700`,children:e.jsx(I,{className:"w-5 h-5"})})]})}),i?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(V,{size:"lg"})}):h.length>0?e.jsx("div",{className:`grid gap-6 ${r==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:h.map(d=>e.jsx(E,{nft:d,viewMode:r},d.id))}):e.jsx("div",{className:"text-center text-gray-400 py-12",children:e.jsx("p",{children:b("marketplace.noNFTsFound")})})]})]})]})};export{Z as default};
