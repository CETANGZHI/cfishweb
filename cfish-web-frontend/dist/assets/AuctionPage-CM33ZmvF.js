import{c as I,u as O,r as n,j as s,P as R,S as q}from"./index-C8wrHQVv.js";import{S as z}from"./star-Boc2H8BA.js";import{H as D}from"./heart-DstOrYv-.js";import{U as J}from"./users-BqxOkAPd.js";import{E as G}from"./eye-BeiRnY-h.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]],Y=I("gavel",V),re=()=>{const{t:K}=O(),[_,h]=n.useState([]),[C,p]=n.useState(!0),[i,c]=n.useState({type:"all",status:"all",category:"",currency:"all",sort_by:"end_time"}),[b,A]=n.useState(""),[f,y]=n.useState(null),[k,m]=n.useState(!1),[Q,T]=n.useState(!1),[j,B]=n.useState([]),[d,v]=n.useState("live"),x="user_123";n.useEffect(()=>{u(),E()},[i]),n.useEffect(()=>{const e=setInterval(()=>{h(t=>t.map(r=>({...r,timing:{...r.timing,time_remaining:Math.max(0,r.timing.time_remaining-1)}})))},1e3);return()=>clearInterval(e)},[]);const u=async()=>{try{p(!0);const e=new URLSearchParams({type:i.type,status:i.status,currency:i.currency,sort_by:i.sort_by,limit:"20",offset:"0"});i.category&&e.append("category",i.category);const r=await(await fetch(`/api/auctions?${e}`)).json();r.success&&h(r.data.auctions)}catch(e){console.error("Failed to fetch auctions:",e)}finally{p(!1)}},E=async()=>{try{const t=await(await fetch(`/api/auctions/user/${x}`)).json();t.success&&B(t.data.auctions)}catch(e){console.error("Failed to fetch user auctions:",e)}},$=async(e,t)=>{try{const a=await(await fetch(`/api/auctions/${e}/bid`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bidder_address:x,bid_amount:parseFloat(t)})})).json();a.success?(alert("Bid placed successfully!"),u(),m(!1)):alert(a.error||"Failed to place bid")}catch(r){console.error("Failed to place bid:",r),alert("Failed to place bid")}},F=async e=>{try{(await(await fetch(`/api/auctions/${e}/watch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_address:x})})).json()).success&&u()}catch(t){console.error("Failed to watch auction:",t)}},N=e=>{if(e<=0)return"Ended";const t=Math.floor(e/86400),r=Math.floor(e%86400/3600),a=Math.floor(e%3600/60),o=Math.floor(e%60);return t>0?`${t}d ${r}h`:r>0?`${r}h ${a}m`:a>0?`${a}m ${o}s`:`${o}s`},M=e=>{switch(e){case"english":return"🔨";case"dutch":return"📉";case"sealed_bid":return"🔒";case"reserve":return"🛡️";default:return"🏷️"}},H=e=>{switch(e){case"upcoming":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"ended":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},U=_.filter(e=>e.title&&e.title.toLowerCase().includes(b.toLowerCase())),w=({auction:e})=>{const t=e.timing&&e.timing.time_remaining<3600&&e.timing.time_remaining>0,r=e.timing&&e.timing.time_remaining<=0;return s.jsxs("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:e.nft&&e.nft.image?e.nft.image:"/placeholder-nft.png",alt:e.nft&&e.nft.name?e.nft.name:"NFT",className:"w-full h-48 object-cover"}),e.featured&&s.jsxs("div",{className:"absolute top-3 left-3 bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-semibold flex items-center",children:[s.jsx(z,{className:"w-3 h-3 mr-1"}),"Featured"]}),s.jsx("div",{className:`absolute top-3 right-3 px-2 py-1 rounded-full text-xs font-semibold ${H(e.status)}`,children:e.status&&e.status.charAt(0).toUpperCase()+e.status.slice(1)}),t&&s.jsx("div",{className:"absolute bottom-3 left-3 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-semibold animate-pulse",children:"Ending Soon!"})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-lg mr-2",children:M(e.type)}),s.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:e.type_name||e.type})]}),s.jsx("button",{onClick:()=>F(e.id),className:"text-gray-400 hover:text-red-500 transition-colors",children:s.jsx(D,{className:"w-4 h-4"})})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1 line-clamp-1",children:e.title||"Untitled Auction"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.nft&&e.nft.collection?e.nft.collection:"Unknown Collection"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Current Bid"}),s.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[e.pricing&&e.pricing.current_bid?e.pricing.current_bid:"0"," ",e.pricing&&e.pricing.currency?e.pricing.currency:"ETH"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Time Left"}),s.jsx("div",{className:`text-sm font-semibold ${t?"text-red-600":"text-gray-900"}`,children:e.timing&&e.timing.time_remaining?N(e.timing.time_remaining):"N/A"})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(J,{className:"w-3 h-3 mr-1"}),e.participation&&e.participation.unique_bidders?e.participation.unique_bidders:0," bidders"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(G,{className:"w-3 h-3 mr-1"}),e.participation&&e.participation.view_count?e.participation.view_count:0," views"]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>y(e),className:"flex-1 text-blue-600 hover:text-blue-800 font-medium text-sm py-2 px-3 border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors",children:"View Details"}),e.status==="active"&&!r&&s.jsxs("button",{onClick:()=>{y(e),m(!0)},className:"flex-1 bg-blue-600 text-white font-medium text-sm py-2 px-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[s.jsx(Y,{className:"w-4 h-4 mr-1"}),"Bid Now"]})]})]})]})},L=({auction:e,onClose:t,onBid:r})=>{const[a,o]=n.useState("");if(!e)return null;const S=e.pricing&&e.pricing.current_bid?e.pricing.current_bid:0,l=S+.1,P=g=>{if(g.preventDefault(),parseFloat(a)<l){alert(`Minimum bid is ${l} ${e.pricing&&e.pricing.currency?e.pricing.currency:"ETH"}`);return}r(e.id,a)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Place Bid"}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("img",{src:e.nft&&e.nft.image?e.nft.image:"/placeholder-nft.png",alt:e.nft&&e.nft.name?e.nft.name:"NFT",className:"w-full h-32 object-cover rounded-lg mb-3"}),s.jsx("h3",{className:"font-semibold text-gray-900",children:e.title||"Untitled Auction"}),s.jsx("p",{className:"text-sm text-gray-600",children:e.nft&&e.nft.collection?e.nft.collection:"Unknown Collection"})]}),s.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Current Bid:"}),s.jsxs("span",{className:"font-semibold",children:[S," ",e.pricing&&e.pricing.currency?e.pricing.currency:"ETH"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Minimum Bid:"}),s.jsxs("span",{className:"font-semibold text-green-600",children:[l," ",e.pricing&&e.pricing.currency?e.pricing.currency:"ETH"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Time Remaining:"}),s.jsx("span",{className:"font-semibold text-red-600",children:e.timing&&e.timing.time_remaining?N(e.timing.time_remaining):"N/A"})]})]}),s.jsxs("form",{onSubmit:P,children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Your Bid (",e.pricing&&e.pricing.currency?e.pricing.currency:"ETH",")"]}),s.jsx("input",{type:"number",value:a,onChange:g=>o(g.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Minimum: ${l}`,min:l,step:"0.01",required:!0})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Place Bid"})]})]})]})})})};return s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Auction House"}),s.jsx("p",{className:"text-gray-600",children:"Discover and bid on exclusive NFT auctions"})]}),s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsx("button",{onClick:()=>v("live"),className:`py-2 px-1 border-b-2 font-medium text-sm ${d==="live"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Live Auctions"}),s.jsxs("button",{onClick:()=>v("my-auctions"),className:`py-2 px-1 border-b-2 font-medium text-sm ${d==="my-auctions"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["My Auctions (",j.length,")"]}),s.jsxs("button",{onClick:()=>T(!0),className:"py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center text-sm",children:[s.jsx(R,{className:"w-4 h-4 mr-2"}),"Create Auction"]})]})})}),d==="live"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),s.jsxs("div",{className:"relative",children:[s.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",value:b,onChange:e=>A(e.target.value),className:"pl-10 w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search auctions..."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),s.jsxs("select",{value:i.type,onChange:e=>c({...i,type:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"english",children:"English Auction"}),s.jsx("option",{value:"dutch",children:"Dutch Auction"}),s.jsx("option",{value:"sealed_bid",children:"Sealed Bid"}),s.jsx("option",{value:"reserve",children:"Reserve Auction"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:i.status,onChange:e=>c({...i,status:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"upcoming",children:"Upcoming"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"ended",children:"Ended"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),s.jsxs("select",{value:i.currency,onChange:e=>c({...i,currency:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Currencies"}),s.jsx("option",{value:"CFISH",children:"CFISH"}),s.jsx("option",{value:"SOL",children:"SOL"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),s.jsxs("select",{value:i.sort_by,onChange:e=>c({...i,sort_by:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"end_time",children:"Ending Soon"}),s.jsx("option",{value:"current_bid",children:"Highest Bid"}),s.jsx("option",{value:"start_time",children:"Recently Started"})]})]})]})}),C?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map(e=>s.jsx(w,{auction:e},e.id))})]}),d==="my-auctions"&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(e=>s.jsx(w,{auction:e},e.id))}),k&&f&&s.jsx(L,{auction:f,onClose:()=>m(!1),onBid:$})]})})};export{re as default};
